<div class="page-container">
  <!-- KPI Cards - Properly Aligned -->
  <div class="kpi-grid">
    <div class="card kpi-card">
      <div class="kpi-icon primary">ğŸ“Š</div>
      <div class="kpi-details">
        <div class="kpi-label">Total Orders</div>
        <div class="kpi-value">{{ stats.totalOrders }}</div>
        <div class="kpi-change positive">+12% from last month</div>
      </div>
    </div>
    
    <div class="card kpi-card">
      <div class="kpi-icon success">ğŸ’¶</div>
      <div class="kpi-details">
        <div class="kpi-label">Inventory Value</div>
        <div class="kpi-value">â‚¬{{ stats.inventoryValue.toLocaleString() }}</div>
        <div class="kpi-change positive">+8% growth</div>
      </div>
    </div>
    
    <div class="card kpi-card">
      <div class="kpi-icon warning">âš ï¸</div>
      <div class="kpi-details">
        <div class="kpi-label">Compliance Alerts</div>
        <div class="kpi-value">{{ stats.complianceAlerts }}</div>
        <div class="kpi-change">Requires attention</div>
      </div>
    </div>
    
    <div class="card kpi-card">
      <div class="kpi-icon info">ğŸ“</div>
      <div class="kpi-details">
        <div class="kpi-label">Active Contracts</div>
        <div class="kpi-value">{{ stats.activeContracts }}</div>
        <div class="kpi-change positive">+5 new this month</div>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="charts-grid">
    <!-- Sales Trend Chart -->
    <div class="card chart-card">
      <div class="card-header">
        <h3>Monthly Sales Trend</h3>
      </div>
      <div class="chart-container">
        <canvas 
          baseChart
          [type]="salesChartType"
          [data]="salesChartData"
          [options]="salesChartOptions">
        </canvas>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="card quick-stats-card">
      <div class="card-header">
        <h3>Quick Overview</h3>
      </div>
      <div class="stats-list">
        <div class="stat-item">
          <div class="stat-icon">ğŸŒ¾</div>
          <div class="stat-info">
            <div class="stat-label">Total Farm Area</div>
            <div class="stat-number">13.5 hectares</div>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">ğŸ“¦</div>
          <div class="stat-info">
            <div class="stat-label">Products Tracked</div>
            <div class="stat-number">6 categories</div>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-info">
            <div class="stat-label">Contract Farmers</div>
            <div class="stat-number">5 active</div>
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">âœ…</div>
          <div class="stat-info">
            <div class="stat-label">Compliance Rate</div>
            <div class="stat-number">{{ getComplianceRate() }}%</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Activity Section -->
  <div class="activity-grid">
    <!-- Recent Sales -->
    <div class="card activity-card">
      <div class="card-header">
        <h3>Recent Sales Orders</h3>
        <a routerLink="/sales" class="view-all-link">View All â†’</a>
      </div>
      <div class="activity-list">
        @for (sale of recentSales; track sale.orderNumber) {
          <div class="activity-item">
            <div class="activity-icon">ğŸ’°</div>
            <div class="activity-details">
              <div class="activity-title">{{ sale.orderNumber }} - {{ sale.customer }}</div>
              <div class="activity-subtitle">{{ sale.items }} â€¢ {{ sale.quantity }} kg</div>
            </div>
            <div class="activity-meta">
              <div class="activity-amount">â‚¬{{ sale.value.toLocaleString() }}</div>
              <span class="badge badge-{{ sale.status === 'Delivered' ? 'success' : sale.status === 'Confirmed' ? 'info' : 'gray' }}">
                {{ sale.status }}
              </span>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Recent Purchases -->
    <div class="card activity-card">
      <div class="card-header">
        <h3>Recent Purchase Orders</h3>
        <a routerLink="/purchase" class="view-all-link">View All â†’</a>
      </div>
      <div class="activity-list">
        @for (purchase of recentPurchases; track purchase.poNumber) {
          <div class="activity-item">
            <div class="activity-icon">ğŸ›’</div>
            <div class="activity-details">
              <div class="activity-title">{{ purchase.poNumber }} - {{ purchase.vendor }}</div>
              <div class="activity-subtitle">{{ purchase.items }}</div>
            </div>
            <div class="activity-meta">
              <div class="activity-amount">â‚¬{{ purchase.value.toLocaleString() }}</div>
              <span class="badge badge-{{ purchase.status === 'Received' ? 'success' : purchase.status === 'Approved' ? 'info' : 'warning' }}">
                {{ purchase.status }}
              </span>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</div>
